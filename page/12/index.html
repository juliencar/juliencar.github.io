
<!-- language redirection -->



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta name="verify-v1" content="EJ2NpUoBJt1jI8pSdXfbuhS9bvxRhKMBK+mK7HPvS+E=" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Julien Carnelos Blog &#8211; Archives </title>
 <!-- leave this for stats -->
<link rel="stylesheet" href="/wp-content/themes/freshy/style.css" type="text/css" media="screen" title="Freshy"/>



<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
	<link rel='archives' title='juillet 2010' href='/2010/07/' />
	<link rel='archives' title='juin 2010' href='/2010/06/' />
	<link rel='archives' title='mai 2010' href='/2010/05/' />
	<link rel='archives' title='septembre 2008' href='/2008/09/' />
	<link rel='archives' title='ao√ªt 2008' href='/2008/08/' />
	<link rel='archives' title='mars 2008' href='/2008/03/' />
	<link rel='archives' title='f√©vrier 2008' href='/2008/02/' />
	<link rel='archives' title='d√©cembre 2007' href='/2007/12/' />
	<link rel='archives' title='novembre 2007' href='/2007/11/' />
	<link rel='archives' title='octobre 2007' href='/2007/10/' />
	<link rel='archives' title='septembre 2007' href='/2007/09/' />
	<link rel='archives' title='ao√ªt 2007' href='/2007/08/' />
	<link rel='archives' title='juillet 2007' href='/2007/07/' />
	<link rel='archives' title='juin 2007' href='/2007/06/' />
	<link rel='archives' title='mai 2007' href='/2007/05/' />
	<link rel='archives' title='avril 2007' href='/2007/04/' />
	<link rel='archives' title='mars 2007' href='/2007/03/' />
	<link rel='archives' title='f√©vrier 2007' href='/2007/02/' />
	<link rel='archives' title='janvier 2007' href='/2007/01/' />
	<link rel='archives' title='d√©cembre 2006' href='/2006/12/' />
	<link rel='archives' title='novembre 2006' href='/2006/11/' />
	<link rel='archives' title='octobre 2006' href='/2006/10/' />
	<link rel='archives' title='septembre 2006' href='/2006/09/' />
	<link rel='archives' title='ao√ªt 2006' href='/2006/08/' />
	<link rel='archives' title='juillet 2006' href='/2006/07/' />
	<link rel='archives' title='juin 2006' href='/2006/06/' />
	<link rel='archives' title='mai 2006' href='/2006/05/' />
	<link rel='archives' title='avril 2006' href='/2006/04/' />
	<link rel='archives' title='mars 2006' href='/2006/03/' />
	<link rel='archives' title='f√©vrier 2006' href='/2006/02/' />
	<link rel='archives' title='janvier 2006' href='/2006/01/' />
	<link rel='archives' title='d√©cembre 2005' href='/2005/12/' />
	<link rel='archives' title='novembre 2005' href='/2005/11/' />
	<link rel='archives' title='octobre 2005' href='/2005/10/' />
	<link rel='archives' title='septembre 2005' href='/2005/09/' />
<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.4.3'></script>
<link rel='https://api.w.org/' href='/wp-json/' />

 

<link rel='shortlink' href='http://wp.me/7AZy' />

	<style type="text/css">
	.menu li a {
		background-image:url("/wp-content/themes/freshy/images/menu/menu_triple_red.gif");
	}
	.menu li a.first_menu {
		background-image:url("/wp-content/themes/freshy/images/menu/menu_start_triple_red.gif");
	}
	.menu li a.last_menu {
		background-image:url("/wp-content/themes/freshy/images/menu/menu_end_triple_red.gif");
	}
	.menu li.current_page_item a {
		color:#ffffff !important;
	}
	
	.description {
		color:#ff6c00;
	}
	#content .commentlist dd.author_comment {
		background-color:#f5bb0c !important;
	}
	html > body #content .commentlist dd.author_comment {
		background-color:#f5bb0c !important;
	}
	#content .commentlist dt.author_comment .date {
		color:#f5bb0c !important;
		border-color:#f5bb0c !important;
	}
	#content .commentlist .author_comment .author,
	#content .commentlist .author_comment .author a {
		color:#f5bb0c !important;
		border-color:#f5bb0c !important;
	}
	#sidebar h2 {
		color:#0f80d8;
		background-color:#FFFFFF;
		border-bottom-color:#0f80d8;
	}
	#sidebar {
		background-color:#dbefff;
	}
	*::-moz-selection {
		background-color:#f5690c;
	}

	#content a:hover {
		border-bottom:1px dotted #f5690c;
	}

	#sidebar a:hover,
	#sidebar .current_page_item li a:hover,
	#sidebar .current-cat li a:hover,
	#sidebar .current_page_item a,
	#sidebar .current-cat a ,
	.readmore,
	#content .postmetadata a
	{
		color : #f5690c;
	}
	
	#title_image {
		margin:0;
		text-align:left;
		display:block;
		height:95px;
				background-image:url("/wp-content/themes/freshy/images/headers/551235_11975342.jpg");
	
			}
	
	</style>

			<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<!-- Google Analytics Tracking by Google Analyticator 6.4.3: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-70231-3']);
        _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google 
        
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>
<body>

<div id="page">
	
	<!-- header -->
	<div id="header">
		<div id="title">
			<h1>
				<a href="">
					<span>Julien Carnelos Blog &#8211; Archives</span>
				</a>
			</h1>
			<div class="description">
				<small>Voici les archives de mon Blog !</small>
			</div>
		</div>
		<div id="title_image"></div>
	</div>
	
	<!-- main div -->
	<div id="frame">

	<!-- main menu -->
			<ul class="menu">
			
			<li class="current_page_item">
				<a class="first_menu" href="">
					Accueil				</a>
			</li>
					
							
			<li class="last_menu">
				
				<!-- if an email is set in the options -->
								<!-- put an empty link to have the end of the menu anyway -->
					
				<a class="last_menu_off">
				</a>
					
									
			</li>

		</ul>
		
	<hr style="display:none"/>
	<div id="content">
	
	<!-- pages -->
			
						
			<div class="post" id="post-31">
				
				<h2><a href="/2006/01/18/marre-de-votre-navigateur/" rel="bookmark" title="Read Marre de votre navigateur ?">Marre de votre navigateur ?</a></h2>
				<small class="date">
					<span class="date_day">18</span>
					<span class="date_month">01</span>
					<span class="date_year">2006</span>
				</small>
				
				<div class="entry">
					<p>Alors essayez <a href="http://www.bitty.com/" hreflang="en">Bitty</a>. <br />
 Le navigateur inclus dans le navigateur qui fonctionne avec tous les navigateurs.<br />
 Ne vous inqui√©tez pas, moi aussi je trouve que c&rsquo;est compl√©tement d√©bile comme id√©e. Certaines personnes l&rsquo;utilisent vraiment sur leur site, comme ici : <a href="http://ba.manilasites.com/" hreflang="en">http://ba.manilasites.com/</a>. <br />
 Techniquement, le projet doit quand m√™me √™tre relativement balaise pour g√©rer tout √ßa en Javascript, donc bravo au d√©veloppeur. </p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <span>Commentaires ferm√©s<span class="screen-reader-text"> sur Marre de votre navigateur ?</span></span></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/web/" rel="category tag">Web</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-30">
				
				<h2><a href="/2006/01/16/le-flash/" rel="bookmark" title="Read Le Flash">Le Flash</a></h2>
				<small class="date">
					<span class="date_day">16</span>
					<span class="date_month">01</span>
					<span class="date_year">2006</span>
				</small>
				
				<div class="entry">
					<p>Vu sur le blog de <a href="http://www.fredcavazza.net/index.php?2006/01/16/1021-quand-les-intros-flash-sont-pedagogiques" hreflang="fr">Fred Cavazza</a>, ce site utilise le Flash d&rsquo;une fa√ßon diff√©rente. Plut√¥t que d&rsquo;ajouter une surcouche Flash avec des animations dans tous les sens qui am√©liorent rarement la lisibilit√©, ce site simule les sens de fa√ßon vraiment originale&#8230; A voir pour le concept&nbsp;: <a href="http://www.a-to-s.co.uk/home.php" hreflang="en">A-to-S</a> .</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2006/01/16/le-flash/#comments">1 Commentaire &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/web/" rel="category tag">Web</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-29">
				
				<h2><a href="/2006/01/11/le-contre-scenario-anti-telemarketing/" rel="bookmark" title="Read le Contre-sc√©nario Anti-Telemarketing">le Contre-sc√©nario Anti-Telemarketing</a></h2>
				<small class="date">
					<span class="date_day">11</span>
					<span class="date_month">01</span>
					<span class="date_year">2006</span>
				</small>
				
				<div class="entry">
					<p>Vu sur ce site&nbsp;: <a href="http://www.xs4all.nl/~egbg/frans.html" hreflang="fr">EGBG Anti-Telemarketing Contre-sc√©nario</a></p>
<p>Ils proposent un contre sc√©nario √† utiliser lorsqu&rsquo;un t√©l√©prospecteur t√©l√©phone chez vous. Pour cela ils fournissent une grille de r√©ponses √† donner pr√™t √† l&#8217;emploi sur l&rsquo;url&nbsp;: <br />
<a href="http://www.xs4all.nl/~egbg/EGBGcontrescenario.pdf" hreflang="fr">http://www.xs4all.nl/~egbg/EGBGcontrescenario.pdf</a></p>
<p>Exemple :</p>
<p><img src="/blog/images/web/telemarket_1.PNG" alt="" /></p>
<p>Je me demande l&rsquo;efficacit√© de cette approche mais c&rsquo;est put√¥t rigolo comme id√©e. Si quelqu&rsquo;un veut bien tester, qu&rsquo;il n&rsquo;h√©site pas √† commenter. Ces derniers temps je suis tranquille de ce cot√© l√†, et aucun coup de fil commercial pour tester&#8230;</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2006/01/11/le-contre-scenario-anti-telemarketing/#comments">3 Commentaires &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/web/" rel="category tag">Web</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-28">
				
				<h2><a href="/2006/01/06/ajax-et-struts-par-l-exemple/" rel="bookmark" title="Read AJAX et Struts par l&rsquo;exemple">AJAX et Struts par l&rsquo;exemple</a></h2>
				<small class="date">
					<span class="date_day">6</span>
					<span class="date_month">01</span>
					<span class="date_year">2006</span>
				</small>
				
				<div class="entry">
					<p>Premier vrai et long article technique de ce blog&#8230;</p>
<p><strong>Pr√©ambule</strong></p>
<p>On trouve aujourd&rsquo;hui beaucoup de r√©f√©rences sur le net sur AJAX ( XmlHTTPRequest en r√©alit√© ) mais peu d&rsquo;√©l√©ments sur l&rsquo;int√©gration de AJAX sur le framework Struts. Concernant les ressources francaises sur le sujet, c&rsquo;est quasi inexistant en recherche sur Google. Je me suis donc d√©cid√© √† √©crire ce petit article technique. Attention, cet article n&rsquo;explique pas r√©ellement le fonctionnement de la technologie AJAX mais plut√¥t de son int√©gration avec le framework Struts.</p>
<p><strong>Concept</strong></p>
<p>Pour rappeler tr√®s bri√©vement la technologie AJAX, il s&rsquo;agit de permettre au navigateur d&rsquo;effectuer des requ√™tes HTTP sur le serveur en Javascript et de mettre √† jour dynamiquement le contenu de la page (via DHTML) sans recharger toute la fen√™tre.</p>
<p>Rappel des √©tapes :</p>
<ol>
<li>Cr√©ation d&rsquo;un objet XmlHttpRequest (sous Javascript)</li>
<li>Param√©trage de cet objet (url et m√©thode de callback)</li>
<li>Ex√©cution de la requ√™te</li>
<li>Cot√© serveur, on re√ßoit la requ√™te que l&rsquo;on traite puis on renvoie le r√©sultat</li>
<li>Le retour est trait√© dans la m√©thode callback pr√©alablement d√©finie</li>
</ol>
<p>Pour plus d&rsquo;informations, il existe de nombreux <a href="http://www.vnunet.fr/actualite/gds_comptes/applications/20051222009" hreflang="fr">sites en parlant mieux que moi</a>&#8230;</p>
<p><strong>Int√©gration avec Struts</strong></p>
<p>Comme on peut le voir dans les √©tapes ci-dessus, l&rsquo;int√©gration avec Struts ne se situe <em>que</em> lors de l&rsquo;√©tape 4 puisque c&rsquo;est la seule √©tape qui fait intervenir le serveur. Afin d&rsquo;impl√©menter la r√©ception des appels AJAX sur le serveur, plusieurs solutions sont possibles :</p>
<ul>
<li>Ecrire des servlets sp√©cifiques</li>
<li>Utiliser un framework comme DWR</li>
<li>Ecrire des actions Struts ¬´¬†standard¬†¬ª d√©di√©s</li>
</ul>
<p>La 1√®re solution √©tant √† proscrire et la deuxi√®me impliquant l&rsquo;utilisation d&rsquo;un framework tiers, la solution d&rsquo;actions d√©di√©es est parfaitement adapt√©e pour des petites extensions sur des projets existants comme cela est souvent le cas avec l&rsquo;utilisation de AJAX.</p>
<p>Mon exemple sera l&rsquo;impl√©mentation d&rsquo;une page donnant l&rsquo;heure du serveur. C&rsquo;est un exemple trivial mais il permet de mettre en place la cha√Æne compl√®te, ce qui est l&rsquo;int√©r√™t de cet article.</p>
<p><strong>Etape 1 : Ecriture de la page HTML</strong></p>
<p>On commence par la page HTML :</p>
<pre>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Test AJAX et Struts&lt;/title&gt;
&lt;script type="text/javascript"&gt;
&lt;!- -  Ici on placera le code Javascript --&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="form"&gt;
&lt;form action="#"&gt;
&lt;input type="button" name="Envoyer" onclick="appelAjaxExemple();" value="Je veux l'heure du serveur" /&gt;
 &lt;/form&gt;
&lt;/div&gt;
&lt;hr /&gt;
&lt;div id="resultat"&gt; &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>La page est la plus simple possible avec un simple bouton qui appelle la m√©thode Javascript et un DIV de r√©sultat.<br />
Ensuite on √©crit le Javascript suivant entre les balises head :</p>
<pre>// appel√© dans la page function appelAjaxExemple() 
{ 	
ajaxCallRemotePage('ajaxAction.do'); 
}</pre>
<p>Cette m√©thode est celle appel√©e par le bouton du formulaire. Il se contente d&rsquo;appeler la m√©thode de traitement avec en param√®tre l&rsquo;action Struts qui traitera l&rsquo;appel Asynchrone (voir plus bas)</p>
<pre> // Methode d'appel a une page en XmlHttpRequest 
function ajaxCallRemotePage(url) 
{     
if (window.XMLHttpRequest) 
{ 
// Non-IE browsers       	
req = new XMLHttpRequest();        	
req.onreadystatechange = processStateChange;         
req.open("GET", url, true);         
req.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"); 		
req.send(null); 	
} 	
else if (window.ActiveXObject) 
{ 
// IE       	
req = new ActiveXObject("Microsoft.XMLHTTP");        	
req.onreadystatechange = processStateChange;        	
req.open("GET", url, true);        	
req.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"); 		
req.send(); 	
} 	
else { 		
return; // Navigateur non compatible 	
}  
}</pre>
<p>Il s&rsquo;agit de l&rsquo;impl√©mentation technique de la couche XmlHTTPRequest, on peut voir que le code est √©crit pour g√©rer les navigateurs IE et les autres (dont Firefox). La requ√™te sur le serveur est effectu√©e au moment du <em>send()</em>. On peut voir aussi que la m√©thode de callback <em>processStateChange</em> est d√©fini. C&rsquo;est la m√©thode qui est appel√©e lorsque l&rsquo;√©tat de la requ√™te bouge. Voici son code :</p>
<pre> // Methode private qui traite le retour de l'appel de "ajaxCallRemotePage" 
function processStateChange() 
{     
if (req.readyState == 4) 
{ // Complete       
if (req.status == 200) 
{ // OK response        
  // Pour le debug        
  alert("ok:"+req.responseText);    
   } else {         
     // Pour le debug          
     alert("Problem: " + req.statusText);     
     alert("status: " + req.status);   
   }  
} }</pre>
<p>L&rsquo;algorithme est relativement simple. Si l&rsquo;√©tat de la requ√™te est √† 4 (termin√©e), on v√©rifie que le serveur nous a renvoy√© un code HTTP de 200 qui correspond √† un OK serveur. Alors dans ce cas, on affiche le r√©sultat retourn√© par le serveur sinon on affiche l&rsquo;erreur&#8230;</p>
<p><strong>Etape 2 : configuration de Struts</strong></p>
<p>Je consid√®re dans ce chapitre que Struts est d√©j√† correctement install√©. Si vous avez besoin d&rsquo;un projet vide, vous pouvez utiliser le Struts-Blank.</p>
<p>On commence par d√©clarer dans le fichier struts-config, une nouvelle action correspondant √† notre appel depuis le javascript :</p>
<pre>  &lt;action-mappings&gt;    	
&lt;!- - Declaration de notre action Struts --&gt;        
&lt;action            path="/ajaxAction"            type="com.jc.AjaxAction" /&gt;    
&lt;/action-mappings&gt;</pre>
<p>Le contenu de l&rsquo;action mapping est relativement simple puisque on se contente d&rsquo;appeler une classe Java qui effectuera le traitement serveur. On peut remarquer qu&rsquo;il n&rsquo;est pas n√©c√©ssaire de pr√©ciser une page jsp de r√©sultat puisque c&rsquo;est le code java qui √©crit dans l&rsquo;objet <em>response.</em></p>
<p><strong>Etape 3 : Ecriture de l&rsquo;action Struts</strong></p>
<p>Le code de l&rsquo;action Struts est le suivant :</p>
<pre>package com.jc; import java.io.PrintWriter; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import org.apache.struts.action.Action; 
import org.apache.struts.action.ActionForm; 
import org.apache.struts.action.ActionForward; 
import org.apache.struts.action.ActionMapping; 

public class AjaxAction extends Action { 	
 public ActionForward execute(ActionMapping mapping, ActionForm form,        HttpServletRequest request, HttpServletResponse response) throws Exception 
 {
  String valeur = "test"; 	    
  // Write the text to response 	   
  response.setContentType("text/html"); 	   
  PrintWriter out = response.getWriter(); 	   
  out.println(valeur); 	  
  out.flush(); 	   
  return null; 	
 } 
}</pre>
<p>Le code est relativement simple, dans le sens o√π il se contente d&rsquo;√©crire dans le flux de sortie de la requ√™te HTTP. On peut remarquer que le return est <em>null</em>, car on ne suit pas la logique des mappings Struts et que le Javascript lira directement le flux provenant du serveur.</p>
<p><strong>Etape 4 : Le test</strong></p>
<p>En ouvrant le navigateur sur la page de test on tombe sur cet √©cran :<br />
<img src="http://julien.carnelos.free.fr/blog/images/java/article_ajax_1.png" /></p>
<p>Apr√®s un clic sur le bouton, la popup d&rsquo;alert s&rsquo;affiche avec le r√©sultat retourn√© par le serveur :<br />
<img src="http://julien.carnelos.free.fr/blog/images/java/article_ajax_2.png" /></p>
<p>Parfait, maintenant on impl√©mente un peu de fonctionnel&#8230;</p>
<p><strong>Etape 5 : Impl√©mentation de l&rsquo;affichage de l&rsquo;heure du serveur</strong></p>
<p>Maintenant que l&rsquo;aller retour serveur fonctionne, on peut ajouter un peu de code applicatif pour montrer l&rsquo;int√©r√™t de ce framework. Dans notre exemple, au clic sur le bouton, le serveur va retourner son heure syst√®me qui sera affich√© sur la page.</p>
<p>La premi√®re modification concerne le code de l&rsquo;action Java :</p>
<p>A la place de :</p>
<pre>String valeur = "test";</pre>
<p>R√©cup√©rons plut√¥t l&rsquo;heure syst√®me (attention aux imports) :</p>
<pre>Date date = GregorianCalendar.getInstance().getTime(); 
String valeur = SimpleDateFormat.getDateTimeInstance().format(date);</pre>
<p>Il ne reste plus qu&rsquo;√† modifier le javascript de la page : Dans le traitement du r√©sultat :</p>
<pre>if (req.status == 200) 
{ // OK response       
// Pour le debug       
alert("ok:"+req.responseText);</pre>
<p>On remplace l&rsquo;alert par :</p>
<pre>  // alert("ok:"+req.responseText);       
  var d = document.getElementById('resultat');       
  d.innerHTML = req.responseText;</pre>
<p>r√©sultat sur la page :<br />
<img src="http://julien.carnelos.free.fr/blog/images/java/article_ajax_3.png" /></p>
<p><strong>conclusion</strong></p>
<p>Cette petite introduction sera j&rsquo;esp√®re pratique pour les personnes souhaitant d&rsquo;int√©grer rapidement des requ√™tes asynchrones sur des applications d√©j√† existantes. Mais pour une int√©gration plus pouss√©e, l&rsquo;utilisation de frameworks d√©di√©s sera un gros plus.</p>
<p>Source du projet d√©velopp√© sous WTP 1.0 : <a href="http://julien.carnelos.free.fr/blog/fichiers/AjaxProject.zip" hreflang="fr">AjaxProject.zip</a></p>
<p><strong>bugs possibles</strong></p>
<ul>
<li>Attention √† l&rsquo;url de destination pass√© √† la m√©thode Javascript dans un environnement Struts. Une solution est de r√©cup√©rer dans le Javascript la base de l&rsquo;application avec un code comme celui-ci :</li>
</ul>
<pre>var path = window.location.pathname; path = path.substring( 0, path.length - "actionCourante.do".length );</pre>
<ul>
<li>J&rsquo;ai remarqu√© √©galement un autre probl√®me tr√®s g√©nant avec le cache d&rsquo;IE5/IE6 sous Windows 2000 (qui bizarrement fonctionnait sous IE6 &#8211; Windows XP). En fait, le navigateur mettait en cache les appels depuis XmlHTTPRequest : R√©sultat, plus rien ne se passait si on appelait 2x la m√™me URL. Pour corriger ce probl√®me, j&rsquo;ai ajout√© dans les param√®tres d&rsquo;appel :</li>
</ul>
<pre>req.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT");</pre>
<p><strong>R√©f√©rences int√©ressantes</strong></p>
<ul>
<li>Un article sur Struts et AJAX en anglais qui m&rsquo;a servis lors de mon impl√©mentation : <a href="http://www.omnytex.com/articles/xhrstruts/" hreflang="en">Ajax using XMLHttpRequest and Struts</a></li>
<li>Une id√©e int√©ressante pour logger les erereurs Javascript par AJAX : <a href="http://www.xml.com/pub/a/2005/05/11/Ajax-error.html" hreflang="en">Errors and AJAX</a></li>
<li>Un autre article AJAX / Struts : <a href="http://today.java.net/pub/a/today/2005/10/27/sprinkle-ajax-magic-into-struts-webapp.html?page=1" hreflang="en">Sprinkle Some AJAX Magic in Your Struts Web Application</a></li>
</ul>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2006/01/06/ajax-et-struts-par-l-exemple/#comments">29 Commentaires &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/java/" rel="category tag">Java</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-27">
				
				<h2><a href="/2005/12/26/concernant-les-spams-de-ces-derniers-jours/" rel="bookmark" title="Read Concernant les spams de ces derniers jours">Concernant les spams de ces derniers jours</a></h2>
				<small class="date">
					<span class="date_day">26</span>
					<span class="date_month">12</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p>Preuve que mon blog est r√©ellement visit√© , ou preuve que l&rsquo;automatisation du spamming a fait de grands progr√®s, mon blog est maintenant spamm√© sur les commentaires.</p>
<p>J&rsquo;ai donc mis en route le plugin <a href="http://www.dotclear.net/forum/viewtopic.php?id=13328" hreflang="fr">Spamplemousse</a> de dotclear.</p>
<p>Malgr√© le filtrage, il reste toujours des commentaires qui arrivent √† passer r√©guli√®rement. J&rsquo;affine donc au fur et √† mesure la liste des mots interdits, mais si jamais √ßa ne suffit pas, j&rsquo;ajouterais un joli Captcha&nbsp;!</p>
<p>Encore une fois d√©sol√© pour les fils RSS inutilement mis √† jour&#8230;</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <span>Commentaires ferm√©s<span class="screen-reader-text"> sur Concernant les spams de ces derniers jours</span></span></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/general/" rel="category tag">General</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-26">
				
				<h2><a href="/2005/12/26/installation-sur-bordeaux/" rel="bookmark" title="Read Installation sur Bordeaux">Installation sur Bordeaux</a></h2>
				<small class="date">
					<span class="date_day">26</span>
					<span class="date_month">12</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p>Je profite de ce billet pour annoncer qu&rsquo;enfin le calme commence √† revenir.</p>
<p>En effet, tr√®s peu de temps apr√®s mon arriv√©e sur Bordeaux je suis parti 2 semaines en mission sur Poitiers. C&rsquo;etait relativement dur √©tant donn√© que je venais √† peine d&rsquo;arriver sur Bordeaux mais j&rsquo;ai quand m√™me essay√© de donner bonne impression de la part des bordelais aux poitevins&nbsp;!</p>
<p>En tout cas ma mission l√† bas est termin√©e et j&rsquo;en reviens avec une super exp√©rience technique que j&rsquo;essaierais de partager ici avec deux trois articles si le temps me le permet et que la motivation y est (r√©solution 2006 programm√©e).</p>
<p>Sinon je peux donc maintenant vous parler de l&rsquo;ambiance bordelaise de travail, qui se trouve √™tre ma foi, tr√®s sympathique. Avec un taux d&rsquo;ap√©ros d&rsquo;une excellente moyenne qui fait honneur √† mon ancien travail üòâ L&rsquo;√©quipe est vraiment sympa. Non je ne citerais pas l&#8217;employeur d√©ontologie oblige üôÇ mais si vous cherchez du boulot comme d√©veloppeur Web sur Bordeaux je ne suis pas contre une prime de cooptation =&gt; mon email est sur le cadre de droite üòâ .</p>
<p>La p√©riode est √©galement propice √† vous souhaiter, amis lecteurs (3 personnes perdues maximum üôÇ ) de bonnes f√™tes&nbsp;!</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2005/12/26/installation-sur-bordeaux/#comments">2 Commentaires &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/general/" rel="category tag">General</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-25">
				
				<h2><a href="/2005/11/25/demenagement-la-suite/" rel="bookmark" title="Read D√©m√©nagement : la suite">D√©m√©nagement : la suite</a></h2>
				<small class="date">
					<span class="date_day">25</span>
					<span class="date_month">11</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p>Cela fait 5 jours que je suis arriv√©. Le d√©m√©nagement s&rsquo;est bien pass√© gr√¢ce √† la fine √©quipe recrut√©e.</p>
<p>En vrac&nbsp;:</p>
<ul>
<li>Une maison avec un jardin arri√®re c&rsquo;est vraiment bien, je pourrais limite me promener tout nu si il ne faisait pas si froid üôÇ</li>
<li>En parlant de froid, une maison de plein pied, ca change d&rsquo;un appartement au 4√®me&#8230; J&rsquo;appr√©hende la prochaine facture EDF. Et vive les pulls&nbsp;!</li>
<li>Monter une cuisine r√©clame des dons d&rsquo;extra voyance sur les notices d&rsquo;installation&#8230; ou du culot.</li>
<li><em>Dalichou</em> se montre inter√©ss√© par le jardin par contre il pr√©f√®re lui aussi garder ses fesses au chaud (pas fou !)</li>
<li>Ouvrir une ligne FT apr√®s un d√©groupage total par un pr√©c√©dent locataire c&rsquo;est la mort !! Je suis pas pr√™t d&rsquo;avoir le net@home&#8230;</li>
</ul>
<p>D√©marrage du prochaine taf jeudi <strong>neuf heures z√©ro z√©ro</strong>, je ne sais pas comment je vais faire pour √™tre √† l&rsquo;heure (mes ex-coll√®gues comprendront)</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2005/11/25/demenagement-la-suite/#comments">3 Commentaires &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/general/" rel="category tag">General</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-24">
				
				<h2><a href="/2005/11/18/job-completed/" rel="bookmark" title="Read Job Completed">Job Completed</a></h2>
				<small class="date">
					<span class="date_day">18</span>
					<span class="date_month">11</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p>Et voil√†, c&rsquo;√©tait aujourd&rsquo;hui ma derni√®re journ√©e au travail. Beaucoup d&rsquo;√©motions qu&rsquo;on a essay√© de partager ensemble autour d&rsquo;un petit ap√©ro&#8230; Je remercie chaleureusement tous ceux qui sont venus m√™me si peu lisent ce blog.</p>
<p>Sinon, ces derniers jours √©taient particuli√®rement charg√©s avec √† g√©rer en parall√®le le travail et le d√©m√©nagement. Heureusement le t√©l√©phone nous est coup√© demain √† 6H. Au moins l√†, je suis s√ªr de passer ma journ√©e √† finir les cartons&nbsp;!</p>
<p>Alors vu qu&rsquo;on ne se reverra pas d&rsquo;ici l√†&nbsp;: * Au revoir Toulouse *</p>
<p>J&rsquo;en profiterai pour refaire mon cadre ¬´¬†L&rsquo;auteur¬†¬ª&#8230;</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <a href="/2005/11/18/job-completed/#comments">7 Commentaires &#187;</a></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/general/" rel="category tag">General</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-23">
				
				<h2><a href="/2005/11/18/le-debile-web-20-validator/" rel="bookmark" title="Read Le d√©bile Web 2.0 validator">Le d√©bile Web 2.0 validator</a></h2>
				<small class="date">
					<span class="date_day">18</span>
					<span class="date_month">11</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p><strong><em>The score for http://julien.carnelos.free.fr/blog/ is 4 out of 10</em></strong></p>
<p>Je suis d√©√ßu&#8230; j&rsquo;aurais cru faire plus üôÇ</p>
<pre>   * Attempts to be XHTML Strict ?  Yes!    * Refers to mash-ups ?  No    * Has a Blogline blogroll ?  Yes!    * Appears to be built using Ruby on Rails ?  No    * Refers to VCs ?  No    * Has that goofy 'My Blog is Worth' link ?  No    * Mentions Ruby ?  Yes!    * Has prototype.js ?  No    * Actually mentions Web 2.0 ?  Yes!    * Refers to del.icio.us ?  No</pre>
<p>J&rsquo;aurais pu faire un petit effort et tenter le 6/10 en installant un blog en ruby mais √ßa sera pour la prochaine fois&#8230;</p>
<p>A vous de tester&nbsp;! <a href="http://web2.0validator.com/" hreflang="en">Web 2.0 validator</a> (j&rsquo;aime bien l&rsquo;URL)</p>
<p>Vu sur <a href="http://www.mitternachts-lied.net/blog/" hreflang="fr">Mitternacht</a>.</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <span>Commentaires ferm√©s<span class="screen-reader-text"> sur Le d√©bile Web 2.0 validator</span></span></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/web/" rel="category tag">Web</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
						
			<div class="post" id="post-22">
				
				<h2><a href="/2005/11/02/ie-developper-toolbar/" rel="bookmark" title="Read IE developper ToolBar">IE developper ToolBar</a></h2>
				<small class="date">
					<span class="date_day">2</span>
					<span class="date_month">11</span>
					<span class="date_year">2005</span>
				</small>
				
				<div class="entry">
					<p>Je viens de constater sur le <a href="https://blogs.msdn.com/ie/archive/2005/11/01/487833.aspx" hreflang="en">IEBlog</a>, qu&rsquo;une <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=e59c3964-672d-4511-bb3e-2d5e1db91038&amp;displaylang=en" hreflang="en">version IE de la web developper toolbar</a> est sortie. Bien que je n&rsquo;utilise plus internet explorer pour le d√©veloppement web, j&rsquo;ai quand m√™me install√© la b√™te.</p>
<p>Voici une capture d&rsquo;√©cran de la toolbar (clic pour agrandir):</p>
<p><a href="http://julien.carnelos.free.fr/blog/images/web/ie_devtoolbar_full.png" hreflang="fr"><img src="/blog/images/web/ie_devtoolbar.png" alt="" /></a></p>
<p>Donc, en gros on retrouve les m√™mes fonctionnalit√©s que sur la cel√®bre toolbar de Firefox.</p>
<p>On retrouve toutes les options int√©ressantes comme la possibilit√© d&rsquo;encadrer les √©l√©ments du DOM ou de modifier en temps r√©el les propri√©t√©s de ces √©l√©ments (tr√®s sympatique √ßa!).</p>
<p>A l&rsquo;utilisation c&rsquo;est plut√¥t pratique, fluide et il n&rsquo;a pas plant√© durant mes 10 minutes d&rsquo;utilisation.</p>
<p>En tout cas un bon point pour cet outil. Recommand√© √† tous les d√©veloppeurs Web qui utilisent IE (et ils sont nombreux&#8230;).</p>
				</div>
				
								
				<small class="postmetadata">Commentaires : <span>Commentaires ferm√©s<span class="screen-reader-text"> sur IE developper ToolBar</span></span></small>
				<br/>
				<small class="postmetadata">Cat&eacute;gories : <a href="/category/web/" rel="category tag">Web</a></small>
						
			</div>
				
		<hr style="display:none;"/>
			
		
		<p class="navigation">
			<span class="alignleft"><a href="/page/13/" >&laquo; Entr&eacute;es Pr&eacute;c&eacute;dantes</a></span>
			<span class="alignright"><a href="/page/11/" >Entr&eacute;es Suivantes &raquo;</a></span>
		</p>
	
	<!-- nothing found -->
		
	<!-- homepage -->

		
	</div>
	
	<hr/>
	
	<!-- sidebar -->
		
	<div id="sidebar">
		<div>
                <h2>Recherche</h2>
		
		<div id="recent-comments-2" class="widget widget_recent_comments"><h2 class="title">Commentaires r√©cents</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://www.club-shop.fr' rel='external nofollow' class='url'>Mc David</a></span> dans <a href="/2008/09/07/google-chrome-bta/comment-page-1/#comment-634">Google Chrome &#8211; B&eacute;ta ?</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.cablehdmi.net' rel='external nofollow' class='url'>hdmi</a></span> dans <a href="/2008/09/07/google-chrome-bta/comment-page-1/#comment-633">Google Chrome &#8211; B&eacute;ta ?</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.bon-sejour-en-france.fr' rel='external nofollow' class='url'>bon-sejour-en-france</a></span> dans <a href="/2008/09/07/google-chrome-bta/comment-page-1/#comment-631">Google Chrome &#8211; B&eacute;ta ?</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.bingofr.com' rel='external nofollow' class='url'>David</a></span> dans <a href="/2007/11/20/recevoir-gratuitement-par-sms-les-alertes-du-rseau-tbc-bordeaux/comment-page-1/#comment-629">Recevoir gratuitement par SMS les alertes du r&eacute;seau TBC Bordeaux</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.makeet.com' rel='external nofollow' class='url'>MElalami</a></span> dans <a href="/2007/08/01/rpandre-lamour-dofollow/comment-page-1/#comment-627">R&eacute;pandre l&rsquo;amour : Dofollow</a></li></ul></div>		<div id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="title">Articles r√©cents</h2>		<ul>
					<li>
				<a href="/2010/07/15/lintgration-continue-open-source-en-net-33/">L&rsquo;int&eacute;gration continue Open Source en .NET &#8211; 3/3</a>
						</li>
					<li>
				<a href="/2010/06/30/lintgration-continue-open-source-en-net-23/">L&rsquo;int&eacute;gration continue Open Source en .NET &#8211; 2/3</a>
						</li>
					<li>
				<a href="/2010/06/17/l%e2%80%99integration-continue-open-source-en-net-13/">L‚Äôint√©gration continue Open Source en .NET &#8211; 1/3</a>
						</li>
					<li>
				<a href="/2010/05/17/actualites-mai-2010/">Actualit√©s Mai 2010</a>
						</li>
					<li>
				<a href="/2008/09/07/google-chrome-bta/">Google Chrome &#8211; B&eacute;ta ?</a>
						</li>
				</ul>
		</div>		<div id="archives-2" class="widget widget_archive"><h2 class="title">Archives</h2>		<label class="screen-reader-text" for="archives-dropdown-2">Archives</label>
		<select id="archives-dropdown-2" name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'>
			
			<option value="">S√©lectionner un mois</option>
				<option value='/2010/07/'> juillet 2010 &nbsp;(1)</option>
	<option value='/2010/06/'> juin 2010 &nbsp;(2)</option>
	<option value='/2010/05/'> mai 2010 &nbsp;(1)</option>
	<option value='/2008/09/'> septembre 2008 &nbsp;(1)</option>
	<option value='/2008/08/'> ao√ªt 2008 &nbsp;(1)</option>
	<option value='/2008/03/'> mars 2008 &nbsp;(1)</option>
	<option value='/2008/02/'> f√©vrier 2008 &nbsp;(4)</option>
	<option value='/2007/12/'> d√©cembre 2007 &nbsp;(1)</option>
	<option value='/2007/11/'> novembre 2007 &nbsp;(2)</option>
	<option value='/2007/10/'> octobre 2007 &nbsp;(4)</option>
	<option value='/2007/09/'> septembre 2007 &nbsp;(5)</option>
	<option value='/2007/08/'> ao√ªt 2007 &nbsp;(4)</option>
	<option value='/2007/07/'> juillet 2007 &nbsp;(3)</option>
	<option value='/2007/06/'> juin 2007 &nbsp;(6)</option>
	<option value='/2007/05/'> mai 2007 &nbsp;(2)</option>
	<option value='/2007/04/'> avril 2007 &nbsp;(4)</option>
	<option value='/2007/03/'> mars 2007 &nbsp;(4)</option>
	<option value='/2007/02/'> f√©vrier 2007 &nbsp;(6)</option>
	<option value='/2007/01/'> janvier 2007 &nbsp;(2)</option>
	<option value='/2006/12/'> d√©cembre 2006 &nbsp;(9)</option>
	<option value='/2006/11/'> novembre 2006 &nbsp;(3)</option>
	<option value='/2006/10/'> octobre 2006 &nbsp;(5)</option>
	<option value='/2006/09/'> septembre 2006 &nbsp;(5)</option>
	<option value='/2006/08/'> ao√ªt 2006 &nbsp;(5)</option>
	<option value='/2006/07/'> juillet 2006 &nbsp;(3)</option>
	<option value='/2006/06/'> juin 2006 &nbsp;(4)</option>
	<option value='/2006/05/'> mai 2006 &nbsp;(4)</option>
	<option value='/2006/04/'> avril 2006 &nbsp;(7)</option>
	<option value='/2006/03/'> mars 2006 &nbsp;(5)</option>
	<option value='/2006/02/'> f√©vrier 2006 &nbsp;(3)</option>
	<option value='/2006/01/'> janvier 2006 &nbsp;(7)</option>
	<option value='/2005/12/'> d√©cembre 2005 &nbsp;(2)</option>
	<option value='/2005/11/'> novembre 2005 &nbsp;(4)</option>
	<option value='/2005/10/'> octobre 2005 &nbsp;(6)</option>
	<option value='/2005/09/'> septembre 2005 &nbsp;(13)</option>

		</select>
		</div>          
        </div>


	</div>
	<br style="clear:both" /><!-- without this little <br /> NS6 and IE5PC do not stretch the frame div down to encopass the content DIVs -->
</div>
				
<!-- footer -->
<hr style="display:none"/>

<div id="footer">
	
</div>

</div> <!--- end of the <div id="page"> (from header.php) -->

</body>
</html>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.2'></script>
<!--stats_footer_test--><script src="http://stats.wordpress.com/e-201742.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({blog:'1810496',v:'ext',post:'0'});
var load_cmc = function(){linktracker_init(1810496,0,2);};
if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
else load_cmc();
</script>

		

